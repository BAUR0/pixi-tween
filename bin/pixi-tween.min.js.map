{"version":3,"file":"pixi-tween.min.js","sources":["../src/Tween.js","../src/Easing.js","../src/TweenManager.js","../src/TweenPath.js","../src/index.js"],"sourcesContent":["import Easing from './Easing';\n\n/**\n * Tween class\n *\n * @class\n * @memberof PIXI.tween\n */\nexport default class Tween extends PIXI.utils.EventEmitter {\n    /**\n     * @param {*} target - Target object to tween\n     * @param {PIXI.tween.TweenManager} manager - Tween manager to handle this tween\n     */\n    constructor(target, manager) {\n        super();\n        this.target = target;\n        if (manager) {\n            this.addTo(manager);\n        }\n        this.clear();\n    }\n\n    /**\n     * Add the tween to a manager\n     *\n     * @param {PIXI.tween.TweenManager} manager - Tween manager to handle this tween\n     */\n    addTo(manager) {\n        this.manager = manager;\n        this.manager.addTween(this);\n\n        return this;\n    }\n\n    /**\n     * Chain another tween to play after this tween has ended\n     *\n     * @param {PIXI.tween.Tween} tween - Tween to chain\n     * @returns {PIXI.tween.Tween}\n     */\n    chain(tween) {\n        if (!tween) {\n            tween = new Tween(this.target);\n        }\n        this._chainTween = tween;\n\n        return tween;\n    }\n\n    /**\n     * Starts the tween playing\n     *\n     * @param {Promise} resolve - Promise to resolve when the tween has ended\n     * @returns {PIXI.tween.Tween}\n     */\n    start(resolve) {\n        this.active = true;\n        this.isStarted = false;\n\n        if (!this._resolvePromise && resolve) {\n            this._resolvePromise = resolve;\n        }\n\n        return this;\n    }\n\n    /**\n     * Starts the tween playing, whilst returning a new promise\n     *\n     * @returns {Promise}\n     */\n    startPromise() {\n        if (!Promise) {\n            return this.start();\n        }\n\n        if (this._resolvePromise) {\n            return Promise.resolve();\n        }\n\n        return new Promise((resolve, reject) => {\n            this.start(resolve);\n        });\n  \t}\n\n    /**\n     * Stop the tweens progress\n     *\n     * @param {boolean} [end=false] - Force end to be called\n     * @returns {PIXI.tween.Tween}\n     */\n    stop(end = false) {\n        this.active = false;\n        this.emit('stop');\n\n        if (end) {\n            this._end();\n        }\n\n        return this;\n    }\n\n     /**\n     * Set the end data for the tween\n     *\n     * @param {Object} data - Object containing end point data for the tween\n     * @returns {PIXI.tween.Tween}\n     */\n    to(data = {}) {\n        this._to = data;\n\n        return this;\n    }\n\n    /**\n     * Set the start point data for the tween.\n     * If nothing is set, data is reset so that starting the tween will use the objects current state as the start point\n     *\n     * @param {Object} [data={}] - Object containing start point data for the tween\n     * @returns {PIXI.tween.Tween}\n     */\n    from(data = {}) {\n        this._from = data;\n\n        return this;\n    }\n\n    /**\n     * Remove the tween from the manager if it has one\n     *\n     * @returns {PIXI.tween.Tween}\n     */\n    remove() {\n        if (!this.manager) {\n            return this;\n        }\n\n        this.manager.removeTween(this);\n\n        return this;\n    }\n\n    /**\n     * Clears all class data, meaning that the tween will now do nothing if start is called\n     */\n    clear() {\n        this._time = 1;\n        this.active = false;\n        this.easing = Easing.linear();\n        this.expire = false;\n        this.repeat = 0;\n        this.loop = false;\n        this.delay = 0;\n        this.pingPong = false;\n        this.isStarted = false;\n        this.isEnded = false;\n\n        this._to = {};\n        this._from = {};\n        this._delayTime = 0;\n        this.elapsedTime = 0;\n        this._repeat = 0;\n        this._pingPong = false;\n\n        this._chainTween = null;\n\n        this.path = null;\n        this.pathReverse = false;\n        this.pathFrom = 0;\n        this.pathTo = 0;\n\n        this._resolvePromise = null;\n    }\n\n    /**\n     * Resets the tween to it's default state, but keeping any to and from data, so start can be called to replay the tween\n     *\n     * @returns {PIXI.tween.Tween}\n     */\n    reset() {\n        this.elapsedTime = 0;\n        this._repeat = 0;\n        this._delayTime = 0;\n        this.isStarted = false;\n        this.isEnded = false;\n\n        if (this.pingPong && this._pingPong) {\n            const _to = this._to;\n            const _from = this._from;\n\n            this._to = _from;\n            this._from = _to;\n\n            this._pingPong = false;\n        }\n\n        return this;\n    }\n\n    /**\n     * Set the start point data for the tween.\n     * If nothing is set, data is reset so that starting the tween will use the objects current state as the start point\n     *\n     * @param {delta} [data={}]- Scalar time value from last update to this update.\n     * @param {number} deltaMS - Time elapsed in milliseconds from last update to this update.\n     */\n    update(delta, deltaMS) {\n        if (!this._canUpdate() && (this._to || this.path)) {\n            return;\n        }\n\n        if (this.delay > this._delayTime) {\n            this._delayTime += deltaMS;\n\n            return;\n        }\n\n        if (!this.isStarted) {\n            this._parseData();\n            this.isStarted = true;\n            this.isEnded = false;\n            this.emit('start');\n        }\n\n        const time = (this.pingPong) ? this._time / 2 : this._time;\n        let _to;\n        let _from;\n\n        if (time > this.elapsedTime) {\n            const t = this.elapsedTime + deltaMS;\n            const ended = (t >= time);\n\n            this.elapsedTime = ended ? time : t;\n            this._apply(time);\n\n            const realElapsed = this._pingPong ? time + this.elapsedTime : this.elapsedTime;\n\n            this.emit('update', realElapsed);\n\n            if (ended) {\n                if (this.pingPong && !this._pingPong) {\n                    this._pingPong = true;\n                    _to = this._to;\n                    _from = this._from;\n                    this._from = _to;\n                    this._to = _from;\n\n                    if (this.path) {\n                        _to = this.pathTo;\n                        _from = this.pathFrom;\n                        this.pathTo = _from;\n                        this.pathFrom = _to;\n                    }\n\n                    this.emit('pingpong');\n                    this.elapsedTime = 0;\n\n                    return;\n                }\n\n                if (this.loop || this.repeat > this._repeat) {\n                    ++this._repeat;\n                    this.emit('repeat', this._repeat);\n                    this.elapsedTime = 0;\n\n                    if (this.pingPong && this._pingPong) {\n                        _to = this._to;\n                        _from = this._from;\n                        this._to = _from;\n                        this._from = _to;\n\n                        if (this.path) {\n                            _to = this.pathTo;\n                            _from = this.pathFrom;\n                            this.pathTo = _from;\n                            this.pathFrom = _to;\n                        }\n\n                        this._pingPong = false;\n                    }\n\n                    return;\n                }\n\n                this._end();\n            }\n\n            return;\n        }\n    }\n\n    /**\n     * The current elapsed progress time in ms for the tween.\n     * Defaults to 1 rather than 0, as a hack around a bug of starting a tween with 0 time, and nothing happens\n     *\n     * @member {number}\n     */\n    get time() {\n        return this._time;\n    }\n\n    set time(value) { // eslint-disable-line require-jsdoc\n        this._time = value || 1;\n    }\n\n    _end() {\n        this.isEnded = true;\n        this.active = false;\n        this.emit('end');\n        this.elapsedTime = 0;\n\n        if (this._chainTween) {\n            if (!this._chainTween.manager) {\n                this._chainTween.addTo(this.manager);\n            }\n            this._chainTween.start(this._resolvePromise);\n            this._resolvePromise = null;\n        } else if (this._resolvePromise) {\n            const resolvePromise = this._resolvePromise;\n\n            this._resolvePromise = null;\n            resolvePromise();\n        }\n    }\n\n    _parseData() {\n        if (this.isStarted) {\n            return;\n        }\n\n        _parseRecursiveData(this._to, this._from, this.target);\n\n        if (this.path) {\n            const distance = this.path.totalDistance();\n\n            if (this.pathReverse) {\n                this.pathFrom = distance;\n                this.pathTo = 0;\n            } else {\n                this.pathFrom = 0;\n                this.pathTo = distance;\n            }\n        }\n    }\n\n    _apply(time) {\n        _recursiveApplyTween(this._to, this._from, this.target, time, this.elapsedTime, this.easing);\n\n        if (this.path) {\n            const time = (this.pingPong) ? this._time / 2 : this._time;\n            const b = this.pathFrom;\n            const c = this.pathTo - this.pathFrom;\n            const d = time;\n            const t = this.elapsedTime / d;\n\n            const distance = b + (c * this.easing(t));\n            const pos = this.path.getPointAtDistance(distance);\n\n            this.target.position.set(pos.x, pos.y);\n        }\n    }\n\n    _canUpdate() {\n        return (this._time && this.active && this.target);\n    }\n}\n\nfunction _recursiveApplyTween(to, from, target, time, elapsed, easing) {\n    for (const k in to) {\n        if (!_isObject(to[k])) {\n            const b = from[k];\n            const c = to[k] - from[k];\n            const d = time;\n            const t = elapsed / d;\n\n            target[k] = b + (c * easing(t));\n        } else {\n            _recursiveApplyTween(to[k], from[k], target[k], time, elapsed, easing);\n        }\n    }\n}\n\nfunction _parseRecursiveData(to, from, target) {\n    for (const k in to) {\n        if (from[k] !== 0 && !from[k]) {\n            if (_isObject(target[k])) {\n                from[k] = {};\n                _parseRecursiveData(to[k], from[k], target[k]);\n            } else {\n                from[k] = target[k];\n            }\n        }\n    }\n}\n\nfunction _isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\n","const Easing = {\n    linear() {\n        return function(t) {\n            return t;\n        };\n    },\n\n    inQuad() {\n        return function(t) {\n            return t * t;\n        };\n    },\n\n    outQuad() {\n        return function(t) {\n            return t * (2 - t);\n        };\n    },\n\n    inOutQuad() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t;\n\n            return -0.5 * (--t * (t - 2) - 1);\n        };\n    },\n\n    inCubic() {\n        return function(t) {\n            return t * t * t;\n        };\n    },\n\n    outCubic() {\n        return function(t) {\n            return --t * t * t + 1;\n        };\n    },\n\n    inOutCubic() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t;\n            t -= 2;\n\n            return 0.5 * (t * t * t + 2);\n        };\n    },\n\n    inQuart() {\n        return function(t) {\n            return t * t * t * t;\n        };\n    },\n\n    outQuart() {\n        return function(t) {\n            return 1 - (--t * t * t * t);\n        };\n    },\n\n    inOutQuart() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t * t;\n            t -= 2;\n\n            return -0.5 * (t * t * t * t - 2);\n        };\n    },\n\n    inQuint() {\n        return function(t) {\n            return t * t * t * t * t;\n        };\n    },\n\n    outQuint() {\n        return function(t) {\n            return --t * t * t * t * t + 1;\n        };\n    },\n\n    inOutQuint() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t * t * t;\n            t -= 2;\n\n            return 0.5 * (t * t * t * t * t + 2);\n        };\n    },\n\n    inSine() {\n        return function(t) {\n            return 1 - Math.cos(t * Math.PI / 2);\n        };\n    },\n\n    outSine() {\n        return function(t) {\n            return Math.sin(t * Math.PI / 2);\n        };\n    },\n\n    inOutSine() {\n        return function(t) {\n            return 0.5 * (1 - Math.cos(Math.PI * t));\n        };\n    },\n\n    inExpo() {\n        return function(t) {\n            return t === 0 ? 0 : Math.pow(1024, t - 1);\n        };\n    },\n\n    outExpo() {\n        return function(t) {\n            return t === 1 ? 1 : 1 - Math.pow(2, -10 * t);\n        };\n    },\n\n    inOutExpo() {\n        return function(t) {\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            t *= 2;\n            if (t < 1) return 0.5 * Math.pow(1024, t - 1);\n\n            return 0.5 * (-Math.pow(2, -10 * (t - 1)) + 2);\n        };\n    },\n\n    inCirc() {\n        return function(t) {\n            return 1 - Math.sqrt(1 - t * t);\n        };\n    },\n\n    outCirc() {\n        return function(t) {\n            return Math.sqrt(1 - (--t * t));\n        };\n    },\n\n    inOutCirc() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\n            return 0.5 * (Math.sqrt(1 - (t - 2) * (t - 2)) + 1);\n        };\n    },\n\n    inElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n\n            return -(a * Math.pow(2, 10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p));\n        };\n    },\n\n    outElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n\n            return (a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1);\n        };\n    },\n\n    inOutElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n            t *= 2;\n            if (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p));\n\n            return a * Math.pow(2, -10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p) * 0.5 + 1;\n        };\n    },\n\n    inBack(v) {\n        return function(t) {\n            const s = v || 1.70158;\n\n            return t * t * ((s + 1) * t - s);\n        };\n    },\n\n    outBack(v) {\n        return function(t) {\n            const s = v || 1.70158;\n\n            return --t * t * ((s + 1) * t + s) + 1;\n        };\n    },\n\n    inOutBack(v) {\n        return function(t) {\n            const s =    (v || 1.70158) * 1.525;\n\n            t *= 2;\n            if (t < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\n            return 0.5 * ((t - 2) * (t - 2) * ((s + 1) * (t - 2) + s) + 2);\n        };\n    },\n\n    inBounce() {\n        return function(t) {\n            return 1 - Easing.outBounce()(1 - t);\n        };\n    },\n\n    outBounce() {\n        return function(t) {\n            if (t < (1 / 2.75)) {\n                return 7.5625 * t * t;\n            } else if (t < (2 / 2.75)) {\n                t = (t - (1.5 / 2.75));\n\n                return 7.5625 * t * t + 0.75;\n            } else if (t < (2.5 / 2.75)) {\n                t = (t - (2.25 / 2.75));\n\n                return 7.5625 * t * t + 0.9375;\n            }\n            t -= (2.625 / 2.75);\n\n            return 7.5625 * t * t + 0.984375;\n        };\n    },\n\n    inOutBounce() {\n        return function(t) {\n            if (t < 0.5) return Easing.inBounce()(t * 2) * 0.5;\n\n            return Easing.outBounce()(t * 2 - 1) * 0.5 + 0.5;\n        };\n    },\n\n    customArray(arr) {\n        if (!arr) return Easing.linear();\n\n        return function(t) {\n            // todo: convert array => ease\n            return t;\n        };\n    },\n};\n\nexport default Easing;\n","import Tween from './Tween';\n\nexport default class TweenManager {\n    constructor() {\n        this.tweens = [];\n        this._tweensToDelete = [];\n\n        this._last = 0;\n    }\n\n    update(deltaMS) {\n        if (!deltaMS && deltaMS !== 0) {\n            deltaMS = this._getDeltaMS();\n        }\n\n        const delta = deltaMS / 1000;\n\n        for (let i = 0; i < this.tweens.length; ++i) {\n            const tween = this.tweens[i];\n\n            if (tween.active) {\n                tween.update(delta, deltaMS);\n                if (tween.isEnded && tween.expire) {\n                    tween.remove();\n                }\n            }\n        }\n\n        if (this._tweensToDelete.length) {\n            for (let i = 0; i < this._tweensToDelete.length; ++i) {\n                this._remove(this._tweensToDelete[i]);\n            }\n            this._tweensToDelete.length = 0;\n        }\n    }\n\n    getTweensForTarget(target) {\n        const tweens = [];\n\n        for (let i = 0; i < this.tweens.length; ++i) {\n            if (this.tweens[i].target === target) {\n                tweens.push(this.tweens[i]);\n            }\n        }\n\n        return tweens;\n    }\n\n    createTween(target) {\n        return new Tween(target, this);\n    }\n\n    addTween(tween) {\n        tween.manager = this;\n        this.tweens.push(tween);\n    }\n\n    removeTween(tween) {\n        this._tweensToDelete.push(tween);\n    }\n\n    _remove(tween) {\n        const index = this.tweens.indexOf(tween);\n\n        if (index !== -1) {\n            this.tweens.splice(index, 1);\n        }\n    }\n\n    _getDeltaMS() {\n        if (this._last === 0) {\n            this._last = Date.now();\n        }\n        const now = Date.now();\n        const deltaMS = now - this._last;\n\n        this._last = now;\n\n        return deltaMS;\n    }\n}\n","export default class TweenPath {\n    constructor() {\n        this._colsed = false;\n        this._tmpPoint = new PIXI.Point();\n        this._tmpPoint2 = new PIXI.Point();\n        this._tmpDistance = [];\n\n        this.polygon = new PIXI.Polygon();\n        this.polygon.closed = false;\n\n        this.currentPath = null;\n        this.graphicsData = [];\n        this.dirty = true;\n    }\n\n    moveTo(x, y) {\n        PIXI.Graphics.prototype.moveTo.call(this, x, y);\n        this.dirty = true;\n\n        return this;\n    }\n\n    lineTo(x, y) {\n        PIXI.Graphics.prototype.lineTo.call(this, x, y);\n        this.dirty = true;\n\n        return this;\n    }\n\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\n        PIXI.Graphics.prototype.bezierCurveTo.call(this, cpX, cpY, cpX2, cpY2, toX, toY);\n        this.dirty = true;\n\n        return this;\n    }\n\n    quadraticCurveTo(cpX, cpY, toX, toY) {\n        PIXI.Graphics.prototype.quadraticCurveTo.call(this, cpX, cpY, toX, toY);\n        this.dirty = true;\n\n        return this;\n    }\n\n    arcTo(x1, y1, x2, y2, radius) {\n        PIXI.Graphics.prototype.arcTo.call(this, x1, y1, x2, y2, radius);\n        this.dirty = true;\n\n        return this;\n    }\n\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise) {\n        PIXI.Graphics.prototype.arc.call(this, cx, cy, radius, startAngle, endAngle, anticlockwise);\n        this.dirty = true;\n\n        return this;\n    }\n\n    drawShape(shape) {\n        PIXI.Graphics.prototype.drawShape.call(this, shape);\n        this.dirty = true;\n\n        return this;\n    }\n\n    getPoint(num) {\n        this.parsePoints();\n        const len = (this.closed && num >= this.length - 1) ? 0 : num * 2;\n\n        this._tmpPoint.set(this.polygon.points[len], this.polygon.points[len + 1]);\n\n        return this._tmpPoint;\n    }\n\n    distanceBetween(num1, num2) {\n        this.parsePoints();\n        const { x: p1X, y: p1Y } = this.getPoint(num1);\n        const { x: p2X, y: p2Y } = this.getPoint(num2);\n        const dx = p2X - p1X;\n        const dy = p2Y - p1Y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    totalDistance() {\n        this.parsePoints();\n        this._tmpDistance.length = 0;\n        this._tmpDistance.push(0);\n\n        const len = this.length;\n        let distance = 0;\n\n        for (let i = 0; i < len - 1; ++i) {\n            distance += this.distanceBetween(i, i + 1);\n            this._tmpDistance.push(distance);\n        }\n\n        return distance;\n    }\n\n    getPointAt(num) {\n        this.parsePoints();\n        if (num > this.length) {\n            return this.getPoint(this.length - 1);\n        }\n\n        if (num % 1 === 0) {\n            return this.getPoint(num);\n        }\n        this._tmpPoint2.set(0, 0);\n        const diff = num % 1;\n        const { x: ceilX, y: ceilY } = this.getPoint(Math.ceil(num));\n        const { x: floorX, y: floorY } = this.getPoint(Math.floor(num));\n\n        const xx = -((floorX - ceilX) * diff);\n        const yy = -((floorY - ceilY) * diff);\n\n        this._tmpPoint2.set(floorX + xx, floorY + yy);\n\n        return this._tmpPoint2;\n    }\n\n    getPointAtDistance(distance) {\n        this.parsePoints();\n        if (!this._tmpDistance) {\n            this.totalDistance();\n        }\n        const len = this._tmpDistance.length;\n        let n = 0;\n\n        const totalDistance = this._tmpDistance[this._tmpDistance.length - 1];\n\n        if (distance < 0) {\n            distance = totalDistance + distance;\n        } else if (distance > totalDistance) {\n            distance = distance - totalDistance;\n        }\n\n        for (let i = 0; i < len; ++i) {\n            if (distance >= this._tmpDistance[i]) {\n                n = i;\n            }\n\n            if (distance < this._tmpDistance[i]) break;\n        }\n\n        if (n === this.length - 1) {\n            return this.getPointAt(n);\n        }\n\n        const diff1 = distance - this._tmpDistance[n];\n        const diff2 = this._tmpDistance[n + 1] - this._tmpDistance[n];\n\n        return this.getPointAt(n + diff1 / diff2);\n    }\n\n    parsePoints() {\n        if (!this.dirty) return this;\n        this.dirty = false;\n        this.polygon.points.length = 0;\n        for (let i = 0; i < this.graphicsData.length; ++i) {\n            const shape = this.graphicsData[i].shape;\n\n            if (shape && shape.points) {\n                this.polygon.points = this.polygon.points.concat(shape.points);\n            }\n        }\n\n        return this;\n    }\n\n    clear() {\n        this.graphicsData.length = 0;\n        this.currentPath = null;\n        this.polygon.points.length = 0;\n        this._closed = false;\n        this.dirty = false;\n\n        return this;\n    }\n\n    get closed() {\n        return this._closed;\n    }\n\n    set closed(value) {\n        if (this._closed === value) {\n            return;\n        }\n        this.polygon.closed = value;\n        this._closed = value;\n        this.dirty = true;\n    }\n\n    get length() {\n        return (this.polygon.points.length) ? this.polygon.points.length / 2 + ((this._closed) ? 1 : 0) : 0;\n    }\n}\n","import TweenManager from './TweenManager';\nimport Tween from './Tween';\nimport TweenPath from './TweenPath';\nimport Easing from './Easing';\n\n// extend pixi graphics to draw tweenPaths\nPIXI.Graphics.prototype.drawPath = function drawPath(path) {\n    path.parsePoints();\n    this.drawShape(path.polygon);\n\n    return this;\n};\n\n/**\n * @namespace PIXI.tween\n */\nconst tween = {\n    TweenManager,\n    Tween,\n    Easing,\n    TweenPath,\n};\n\nif (!PIXI.tweenManager) {\n    PIXI.tweenManager = new TweenManager();\n\n    PIXI.tween = tween;\n}\n\nexport default tween;\n"],"names":["_recursiveApplyTween","to","from","target","time","elapsed","easing","k","_isObject","b","c","t","_parseRecursiveData","obj","Object","prototype","toString","call","Easing","Math","cos","PI","sin","pow","sqrt","a","p","s","asin","v","outBounce","inBounce","arr","linear","Tween","manager","addTo","clear","addTween","this","tween","_chainTween","resolve","active","isStarted","_resolvePromise","Promise","reject","start","end","emit","_end","data","_to","_from","removeTween","_time","expire","repeat","loop","delay","pingPong","isEnded","_delayTime","elapsedTime","_repeat","_pingPong","path","pathReverse","pathFrom","pathTo","delta","deltaMS","_canUpdate","_parseData","ended","_apply","realElapsed","resolvePromise","distance","totalDistance","d","pos","getPointAtDistance","position","set","x","y","value","PIXI","utils","EventEmitter","TweenManager","tweens","_tweensToDelete","_last","_getDeltaMS","i","length","update","remove","_remove","push","index","indexOf","splice","Date","now","TweenPath","_colsed","_tmpPoint","Point","_tmpPoint2","_tmpDistance","polygon","Polygon","closed","currentPath","graphicsData","dirty","Graphics","moveTo","lineTo","cpX","cpY","cpX2","cpY2","toX","toY","bezierCurveTo","quadraticCurveTo","x1","y1","x2","y2","radius","arcTo","cx","cy","startAngle","endAngle","anticlockwise","arc","shape","drawShape","num","parsePoints","len","points","num1","num2","getPoint","p1X","p1Y","dx","dy","distanceBetween","diff","ceil","ceilX","ceilY","floor","floorX","floorY","xx","yy","n","getPointAt","diff1","diff2","concat","_closed","drawPath","tweenManager"],"mappings":"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"}