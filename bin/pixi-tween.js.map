{"version":3,"file":"pixi-tween.js","sources":["../src/Easing.js","../src/Tween.js","../src/TweenManager.js","../src/TweenPath.js","../src/index.js"],"sourcesContent":["const Easing = {\n    linear() {\n        return function(t) {\n            return t;\n        };\n    },\n\n    inQuad() {\n        return function(t) {\n            return t * t;\n        };\n    },\n\n    outQuad() {\n        return function(t) {\n            return t * (2 - t);\n        };\n    },\n\n    inOutQuad() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t;\n\n            return -0.5 * (--t * (t - 2) - 1);\n        };\n    },\n\n    inCubic() {\n        return function(t) {\n            return t * t * t;\n        };\n    },\n\n    outCubic() {\n        return function(t) {\n            return --t * t * t + 1;\n        };\n    },\n\n    inOutCubic() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t;\n            t -= 2;\n\n            return 0.5 * (t * t * t + 2);\n        };\n    },\n\n    inQuart() {\n        return function(t) {\n            return t * t * t * t;\n        };\n    },\n\n    outQuart() {\n        return function(t) {\n            return 1 - (--t * t * t * t);\n        };\n    },\n\n    inOutQuart() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t * t;\n            t -= 2;\n\n            return -0.5 * (t * t * t * t - 2);\n        };\n    },\n\n    inQuint() {\n        return function(t) {\n            return t * t * t * t * t;\n        };\n    },\n\n    outQuint() {\n        return function(t) {\n            return --t * t * t * t * t + 1;\n        };\n    },\n\n    inOutQuint() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return 0.5 * t * t * t * t * t;\n            t -= 2;\n\n            return 0.5 * (t * t * t * t * t + 2);\n        };\n    },\n\n    inSine() {\n        return function(t) {\n            return 1 - Math.cos(t * Math.PI / 2);\n        };\n    },\n\n    outSine() {\n        return function(t) {\n            return Math.sin(t * Math.PI / 2);\n        };\n    },\n\n    inOutSine() {\n        return function(t) {\n            return 0.5 * (1 - Math.cos(Math.PI * t));\n        };\n    },\n\n    inExpo() {\n        return function(t) {\n            return t === 0 ? 0 : Math.pow(1024, t - 1);\n        };\n    },\n\n    outExpo() {\n        return function(t) {\n            return t === 1 ? 1 : 1 - Math.pow(2, -10 * t);\n        };\n    },\n\n    inOutExpo() {\n        return function(t) {\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            t *= 2;\n            if (t < 1) return 0.5 * Math.pow(1024, t - 1);\n\n            return 0.5 * (-Math.pow(2, -10 * (t - 1)) + 2);\n        };\n    },\n\n    inCirc() {\n        return function(t) {\n            return 1 - Math.sqrt(1 - t * t);\n        };\n    },\n\n    outCirc() {\n        return function(t) {\n            return Math.sqrt(1 - (--t * t));\n        };\n    },\n\n    inOutCirc() {\n        return function(t) {\n            t *= 2;\n            if (t < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\n            return 0.5 * (Math.sqrt(1 - (t - 2) * (t - 2)) + 1);\n        };\n    },\n\n    inElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n\n            return -(a * Math.pow(2, 10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p));\n        };\n    },\n\n    outElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n\n            return (a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1);\n        };\n    },\n\n    inOutElastic(a = 0.1, p = 0.4) {\n        return function(t) {\n            let s;\n\n            if (t === 0) return 0;\n            if (t === 1) return 1;\n            if (!a || a < 1) { a = 1; s = p / 4; } else s = p * Math.asin(1 / a) / (2 * Math.PI);\n            t *= 2;\n            if (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p));\n\n            return a * Math.pow(2, -10 * (t - 1)) * Math.sin(((t - 1) - s) * (2 * Math.PI) / p) * 0.5 + 1;\n        };\n    },\n\n    inBack(v) {\n        return function(t) {\n            const s = v || 1.70158;\n\n            return t * t * ((s + 1) * t - s);\n        };\n    },\n\n    outBack(v) {\n        return function(t) {\n            const s = v || 1.70158;\n\n            return --t * t * ((s + 1) * t + s) + 1;\n        };\n    },\n\n    inOutBack(v) {\n        return function(t) {\n            const s =    (v || 1.70158) * 1.525;\n\n            t *= 2;\n            if (t < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\n            return 0.5 * ((t - 2) * (t - 2) * ((s + 1) * (t - 2) + s) + 2);\n        };\n    },\n\n    inBounce() {\n        return function(t) {\n            return 1 - Easing.outBounce()(1 - t);\n        };\n    },\n\n    outBounce() {\n        return function(t) {\n            if (t < (1 / 2.75)) {\n                return 7.5625 * t * t;\n            } else if (t < (2 / 2.75)) {\n                t = (t - (1.5 / 2.75));\n\n                return 7.5625 * t * t + 0.75;\n            } else if (t < (2.5 / 2.75)) {\n                t = (t - (2.25 / 2.75));\n\n                return 7.5625 * t * t + 0.9375;\n            }\n            t -= (2.625 / 2.75);\n\n            return 7.5625 * t * t + 0.984375;\n        };\n    },\n\n    inOutBounce() {\n        return function(t) {\n            if (t < 0.5) return Easing.inBounce()(t * 2) * 0.5;\n\n            return Easing.outBounce()(t * 2 - 1) * 0.5 + 0.5;\n        };\n    },\n\n    customArray(arr) {\n        if (!arr) return Easing.linear();\n\n        return function(t) {\n            // todo: convert array => ease\n            return t;\n        };\n    },\n};\n\nexport default Easing;\n","import Easing from './Easing';\n\n/**\n * Tween class\n *\n * @class\n * @memberof PIXI.tween\n */\nexport default class Tween extends PIXI.utils.EventEmitter {\n    /**\n     * @param {*} target - Target object to tween\n     * @param {PIXI.tween.TweenManager} manager - Tween manager to handle this tween\n     */\n    constructor(target, manager) {\n        super();\n        this.target = target;\n        if (manager) {\n            this.addTo(manager);\n        }\n        this.clear();\n    }\n\n    /**\n     * Add the tween to a manager\n     *\n     * @param {PIXI.tween.TweenManager} manager - Tween manager to handle this tween\n     */\n    addTo(manager) {\n        this.manager = manager;\n        this.manager.addTween(this);\n\n        return this;\n    }\n\n    /**\n     * Chain another tween to play after this tween has ended\n     *\n     * @param {PIXI.tween.Tween} tween - Tween to chain\n     * @returns {PIXI.tween.Tween}\n     */\n    chain(tween) {\n        if (!tween) {\n            tween = new Tween(this.target);\n        }\n        this._chainTween = tween;\n\n        return tween;\n    }\n\n    /**\n     * Starts the tween playing\n     *\n     * @param {Promise} resolve - Promise to resolve when the tween has ended\n     * @returns {PIXI.tween.Tween}\n     */\n    start(resolve) {\n        this.active = true;\n        this.isStarted = false;\n\n        if (!this._resolvePromise && resolve) {\n            this._resolvePromise = resolve;\n        }\n\n        return this;\n    }\n\n    /**\n     * Starts the tween playing, whilst returning a new promise\n     *\n     * @returns {Promise}\n     */\n    startPromise() {\n        if (!Promise) {\n            return this.start();\n        }\n\n        if (this._resolvePromise) {\n            return Promise.resolve();\n        }\n\n        return new Promise((resolve, reject) => {\n            this.start(resolve);\n        });\n  \t}\n\n    /**\n     * Stop the tweens progress\n     *\n     * @param {boolean} [end=false] - Force end to be called\n     * @returns {PIXI.tween.Tween}\n     */\n    stop(end = false) {\n        this.active = false;\n        this.emit('stop');\n\n        if (end) {\n            this._end();\n        }\n\n        return this;\n    }\n\n     /**\n     * Set the end data for the tween\n     *\n     * @param {Object} data - Object containing end point data for the tween\n     * @returns {PIXI.tween.Tween}\n     */\n    to(data = {}) {\n        this._to = data;\n\n        return this;\n    }\n\n    /**\n     * Set the start point data for the tween.\n     * If nothing is set, data is reset so that starting the tween will use the objects current state as the start point\n     *\n     * @param {Object} [data={}] - Object containing start point data for the tween\n     * @returns {PIXI.tween.Tween}\n     */\n    from(data = {}) {\n        this._from = data;\n\n        return this;\n    }\n\n    /**\n     * Remove the tween from the manager if it has one\n     *\n     * @returns {PIXI.tween.Tween}\n     */\n    remove() {\n        if (!this.manager) {\n            return this;\n        }\n\n        this.manager.removeTween(this);\n\n        return this;\n    }\n\n    /**\n     * Clears all class data, meaning that the tween will now do nothing if start is called\n     */\n    clear() {\n        this._time = 1;\n        this.active = false;\n        this.easing = Easing.linear();\n        this.expire = false;\n        this.repeat = 0;\n        this.loop = false;\n        this.delay = 0;\n        this.pingPong = false;\n        this.isStarted = false;\n        this.isEnded = false;\n\n        this._to = {};\n        this._from = {};\n        this._delayTime = 0;\n        this.elapsedTime = 0;\n        this._repeat = 0;\n        this._pingPong = false;\n\n        this._chainTween = null;\n\n        this.path = null;\n        this.pathReverse = false;\n        this.pathFrom = 0;\n        this.pathTo = 0;\n\n        this._resolvePromise = null;\n    }\n\n    /**\n     * Resets the tween to it's default state, but keeping any to and from data, so start can be called to replay the tween\n     *\n     * @returns {PIXI.tween.Tween}\n     */\n    reset() {\n        this.elapsedTime = 0;\n        this._repeat = 0;\n        this._delayTime = 0;\n        this.isStarted = false;\n        this.isEnded = false;\n\n        if (this.pingPong && this._pingPong) {\n            const _to = this._to;\n            const _from = this._from;\n\n            this._to = _from;\n            this._from = _to;\n\n            this._pingPong = false;\n        }\n\n        return this;\n    }\n\n    /**\n     * Set the start point data for the tween.\n     * If nothing is set, data is reset so that starting the tween will use the objects current state as the start point\n     *\n     * @param {delta} [data={}]- Scalar time value from last update to this update.\n     * @param {number} deltaMS - Time elapsed in milliseconds from last update to this update.\n     */\n    update(delta, deltaMS) {\n        if (!this._canUpdate() && (this._to || this.path)) {\n            return;\n        }\n\n        if (this.delay > this._delayTime) {\n            this._delayTime += deltaMS;\n\n            return;\n        }\n\n        if (!this.isStarted) {\n            this._parseData();\n            this.isStarted = true;\n            this.isEnded = false;\n            this.emit('start');\n        }\n\n        const time = (this.pingPong) ? this._time / 2 : this._time;\n        let _to;\n        let _from;\n\n        if (time > this.elapsedTime) {\n            const t = this.elapsedTime + deltaMS;\n            const ended = (t >= time);\n\n            this.elapsedTime = ended ? time : t;\n            this._apply(time);\n\n            const realElapsed = this._pingPong ? time + this.elapsedTime : this.elapsedTime;\n\n            this.emit('update', realElapsed);\n\n            if (ended) {\n                if (this.pingPong && !this._pingPong) {\n                    this._pingPong = true;\n                    _to = this._to;\n                    _from = this._from;\n                    this._from = _to;\n                    this._to = _from;\n\n                    if (this.path) {\n                        _to = this.pathTo;\n                        _from = this.pathFrom;\n                        this.pathTo = _from;\n                        this.pathFrom = _to;\n                    }\n\n                    this.emit('pingpong');\n                    this.elapsedTime = 0;\n\n                    return;\n                }\n\n                if (this.loop || this.repeat > this._repeat) {\n                    ++this._repeat;\n                    this.emit('repeat', this._repeat);\n                    this.elapsedTime = 0;\n\n                    if (this.pingPong && this._pingPong) {\n                        _to = this._to;\n                        _from = this._from;\n                        this._to = _from;\n                        this._from = _to;\n\n                        if (this.path) {\n                            _to = this.pathTo;\n                            _from = this.pathFrom;\n                            this.pathTo = _from;\n                            this.pathFrom = _to;\n                        }\n\n                        this._pingPong = false;\n                    }\n\n                    return;\n                }\n\n                this._end();\n            }\n\n            return;\n        }\n    }\n\n    /**\n     * The current elapsed progress time in ms for the tween.\n     * Defaults to 1 rather than 0, as a hack around a bug of starting a tween with 0 time, and nothing happens\n     *\n     * @member {number}\n     */\n    get time() {\n        return this._time;\n    }\n\n    set time(value) { // eslint-disable-line require-jsdoc\n        this._time = value || 1;\n    }\n\n    _end() {\n        this.isEnded = true;\n        this.active = false;\n        this.emit('end');\n        this.elapsedTime = 0;\n\n        if (this._chainTween) {\n            if (!this._chainTween.manager) {\n                this._chainTween.addTo(this.manager);\n            }\n            this._chainTween.start(this._resolvePromise);\n            this._resolvePromise = null;\n        } else if (this._resolvePromise) {\n            const resolvePromise = this._resolvePromise;\n\n            this._resolvePromise = null;\n            resolvePromise();\n        }\n    }\n\n    _parseData() {\n        if (this.isStarted) {\n            return;\n        }\n\n        _parseRecursiveData(this._to, this._from, this.target);\n\n        if (this.path) {\n            const distance = this.path.totalDistance();\n\n            if (this.pathReverse) {\n                this.pathFrom = distance;\n                this.pathTo = 0;\n            } else {\n                this.pathFrom = 0;\n                this.pathTo = distance;\n            }\n        }\n    }\n\n    _apply(time) {\n        _recursiveApplyTween(this._to, this._from, this.target, time, this.elapsedTime, this.easing);\n\n        if (this.path) {\n            const time = (this.pingPong) ? this._time / 2 : this._time;\n            const b = this.pathFrom;\n            const c = this.pathTo - this.pathFrom;\n            const d = time;\n            const t = this.elapsedTime / d;\n\n            const distance = b + (c * this.easing(t));\n            const pos = this.path.getPointAtDistance(distance);\n\n            this.target.position.set(pos.x, pos.y);\n        }\n    }\n\n    _canUpdate() {\n        return (this._time && this.active && this.target);\n    }\n}\n\nfunction _recursiveApplyTween(to, from, target, time, elapsed, easing) {\n    for (const k in to) {\n        if (!_isObject(to[k])) {\n            const b = from[k];\n            const c = to[k] - from[k];\n            const d = time;\n            const t = elapsed / d;\n\n            target[k] = b + (c * easing(t));\n        } else {\n            _recursiveApplyTween(to[k], from[k], target[k], time, elapsed, easing);\n        }\n    }\n}\n\nfunction _parseRecursiveData(to, from, target) {\n    for (const k in to) {\n        if (from[k] !== 0 && !from[k]) {\n            if (_isObject(target[k])) {\n                from[k] = {};\n                _parseRecursiveData(to[k], from[k], target[k]);\n            } else {\n                from[k] = target[k];\n            }\n        }\n    }\n}\n\nfunction _isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\n","import Tween from './Tween';\n\nexport default class TweenManager {\n    constructor() {\n        this.tweens = [];\n        this._tweensToDelete = [];\n\n        this._last = 0;\n    }\n\n    update(deltaMS) {\n        if (!deltaMS && deltaMS !== 0) {\n            deltaMS = this._getDeltaMS();\n        }\n\n        const delta = deltaMS / 1000;\n\n        for (let i = 0; i < this.tweens.length; ++i) {\n            const tween = this.tweens[i];\n\n            if (tween.active) {\n                tween.update(delta, deltaMS);\n                if (tween.isEnded && tween.expire) {\n                    tween.remove();\n                }\n            }\n        }\n\n        if (this._tweensToDelete.length) {\n            for (let i = 0; i < this._tweensToDelete.length; ++i) {\n                this._remove(this._tweensToDelete[i]);\n            }\n            this._tweensToDelete.length = 0;\n        }\n    }\n\n    getTweensForTarget(target) {\n        const tweens = [];\n\n        for (let i = 0; i < this.tweens.length; ++i) {\n            if (this.tweens[i].target === target) {\n                tweens.push(this.tweens[i]);\n            }\n        }\n\n        return tweens;\n    }\n\n    createTween(target) {\n        return new Tween(target, this);\n    }\n\n    addTween(tween) {\n        tween.manager = this;\n        this.tweens.push(tween);\n    }\n\n    removeTween(tween) {\n        this._tweensToDelete.push(tween);\n    }\n\n    _remove(tween) {\n        const index = this.tweens.indexOf(tween);\n\n        if (index !== -1) {\n            this.tweens.splice(index, 1);\n        }\n    }\n\n    _getDeltaMS() {\n        if (this._last === 0) {\n            this._last = Date.now();\n        }\n        const now = Date.now();\n        const deltaMS = now - this._last;\n\n        this._last = now;\n\n        return deltaMS;\n    }\n}\n","export default class TweenPath {\n    constructor() {\n        this._colsed = false;\n        this._tmpPoint = new PIXI.Point();\n        this._tmpPoint2 = new PIXI.Point();\n        this._tmpDistance = [];\n\n        this.polygon = new PIXI.Polygon();\n        this.polygon.closed = false;\n\n        this.currentPath = null;\n        this.graphicsData = [];\n        this.dirty = true;\n    }\n\n    moveTo(x, y) {\n        PIXI.Graphics.prototype.moveTo.call(this, x, y);\n        this.dirty = true;\n\n        return this;\n    }\n\n    lineTo(x, y) {\n        PIXI.Graphics.prototype.lineTo.call(this, x, y);\n        this.dirty = true;\n\n        return this;\n    }\n\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\n        PIXI.Graphics.prototype.bezierCurveTo.call(this, cpX, cpY, cpX2, cpY2, toX, toY);\n        this.dirty = true;\n\n        return this;\n    }\n\n    quadraticCurveTo(cpX, cpY, toX, toY) {\n        PIXI.Graphics.prototype.quadraticCurveTo.call(this, cpX, cpY, toX, toY);\n        this.dirty = true;\n\n        return this;\n    }\n\n    arcTo(x1, y1, x2, y2, radius) {\n        PIXI.Graphics.prototype.arcTo.call(this, x1, y1, x2, y2, radius);\n        this.dirty = true;\n\n        return this;\n    }\n\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise) {\n        PIXI.Graphics.prototype.arc.call(this, cx, cy, radius, startAngle, endAngle, anticlockwise);\n        this.dirty = true;\n\n        return this;\n    }\n\n    drawShape(shape) {\n        PIXI.Graphics.prototype.drawShape.call(this, shape);\n        this.dirty = true;\n\n        return this;\n    }\n\n    getPoint(num) {\n        this.parsePoints();\n        const len = (this.closed && num >= this.length - 1) ? 0 : num * 2;\n\n        this._tmpPoint.set(this.polygon.points[len], this.polygon.points[len + 1]);\n\n        return this._tmpPoint;\n    }\n\n    distanceBetween(num1, num2) {\n        this.parsePoints();\n        const { x: p1X, y: p1Y } = this.getPoint(num1);\n        const { x: p2X, y: p2Y } = this.getPoint(num2);\n        const dx = p2X - p1X;\n        const dy = p2Y - p1Y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    totalDistance() {\n        this.parsePoints();\n        this._tmpDistance.length = 0;\n        this._tmpDistance.push(0);\n\n        const len = this.length;\n        let distance = 0;\n\n        for (let i = 0; i < len - 1; ++i) {\n            distance += this.distanceBetween(i, i + 1);\n            this._tmpDistance.push(distance);\n        }\n\n        return distance;\n    }\n\n    getPointAt(num) {\n        this.parsePoints();\n        if (num > this.length) {\n            return this.getPoint(this.length - 1);\n        }\n\n        if (num % 1 === 0) {\n            return this.getPoint(num);\n        }\n        this._tmpPoint2.set(0, 0);\n        const diff = num % 1;\n        const { x: ceilX, y: ceilY } = this.getPoint(Math.ceil(num));\n        const { x: floorX, y: floorY } = this.getPoint(Math.floor(num));\n\n        const xx = -((floorX - ceilX) * diff);\n        const yy = -((floorY - ceilY) * diff);\n\n        this._tmpPoint2.set(floorX + xx, floorY + yy);\n\n        return this._tmpPoint2;\n    }\n\n    getPointAtDistance(distance) {\n        this.parsePoints();\n        if (!this._tmpDistance) {\n            this.totalDistance();\n        }\n        const len = this._tmpDistance.length;\n        let n = 0;\n\n        const totalDistance = this._tmpDistance[this._tmpDistance.length - 1];\n\n        if (distance < 0) {\n            distance = totalDistance + distance;\n        } else if (distance > totalDistance) {\n            distance = distance - totalDistance;\n        }\n\n        for (let i = 0; i < len; ++i) {\n            if (distance >= this._tmpDistance[i]) {\n                n = i;\n            }\n\n            if (distance < this._tmpDistance[i]) break;\n        }\n\n        if (n === this.length - 1) {\n            return this.getPointAt(n);\n        }\n\n        const diff1 = distance - this._tmpDistance[n];\n        const diff2 = this._tmpDistance[n + 1] - this._tmpDistance[n];\n\n        return this.getPointAt(n + diff1 / diff2);\n    }\n\n    parsePoints() {\n        if (!this.dirty) return this;\n        this.dirty = false;\n        this.polygon.points.length = 0;\n        for (let i = 0; i < this.graphicsData.length; ++i) {\n            const shape = this.graphicsData[i].shape;\n\n            if (shape && shape.points) {\n                this.polygon.points = this.polygon.points.concat(shape.points);\n            }\n        }\n\n        return this;\n    }\n\n    clear() {\n        this.graphicsData.length = 0;\n        this.currentPath = null;\n        this.polygon.points.length = 0;\n        this._closed = false;\n        this.dirty = false;\n\n        return this;\n    }\n\n    get closed() {\n        return this._closed;\n    }\n\n    set closed(value) {\n        if (this._closed === value) {\n            return;\n        }\n        this.polygon.closed = value;\n        this._closed = value;\n        this.dirty = true;\n    }\n\n    get length() {\n        return (this.polygon.points.length) ? this.polygon.points.length / 2 + ((this._closed) ? 1 : 0) : 0;\n    }\n}\n","import TweenManager from './TweenManager';\nimport Tween from './Tween';\nimport TweenPath from './TweenPath';\nimport Easing from './Easing';\n\n// extend pixi graphics to draw tweenPaths\nPIXI.Graphics.prototype.drawPath = function drawPath(path) {\n    path.parsePoints();\n    this.drawShape(path.polygon);\n\n    return this;\n};\n\n/**\n * @namespace PIXI.tween\n */\nconst tween = {\n    TweenManager,\n    Tween,\n    Easing,\n    TweenPath,\n};\n\nif (!PIXI.tweenManager) {\n    PIXI.tweenManager = new TweenManager();\n\n    PIXI.tween = tween;\n}\n\nexport default tween;\n"],"names":["Easing","t","Math","cos","PI","sin","pow","sqrt","a","p","s","asin","v","outBounce","inBounce","arr","linear","Tween","target","manager","addTo","clear","addTween","tween","_chainTween","resolve","active","isStarted","_resolvePromise","Promise","start","reject","end","emit","_end","data","_to","_from","removeTween","_time","easing","expire","repeat","loop","delay","pingPong","isEnded","_delayTime","elapsedTime","_repeat","_pingPong","path","pathReverse","pathFrom","pathTo","delta","deltaMS","_canUpdate","_parseData","time","ended","_apply","realElapsed","resolvePromise","distance","totalDistance","b","c","d","pos","getPointAtDistance","position","set","x","y","value","PIXI","utils","EventEmitter","_recursiveApplyTween","to","from","elapsed","k","_isObject","_parseRecursiveData","obj","Object","prototype","toString","call","TweenManager","tweens","_tweensToDelete","_last","_getDeltaMS","i","length","update","remove","_remove","push","index","indexOf","splice","Date","now","TweenPath","_colsed","_tmpPoint","Point","_tmpPoint2","_tmpDistance","polygon","Polygon","closed","currentPath","graphicsData","dirty","Graphics","moveTo","lineTo","cpX","cpY","cpX2","cpY2","toX","toY","bezierCurveTo","quadraticCurveTo","x1","y1","x2","y2","radius","arcTo","cx","cy","startAngle","endAngle","anticlockwise","arc","shape","drawShape","num","parsePoints","len","points","num1","num2","getPoint","p1X","p1Y","p2X","p2Y","dx","dy","distanceBetween","diff","ceil","ceilX","ceilY","floor","floorX","floorY","xx","yy","n","getPointAt","diff1","diff2","concat","_closed","drawPath","tweenManager"],"mappings":"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"}